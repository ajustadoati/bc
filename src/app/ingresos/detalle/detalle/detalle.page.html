<ion-header>
  <ion-toolbar>
    <ion-title>Detalle de Pago</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cerrarModal()">
        <ion-icon slot="start" name="log-out-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- Header compacto con fecha y total -->
  <div class="detail-header">
    <div class="date-section">
      <h2>{{ payment.dailyDate | date:'dd/MM/yyyy' }}</h2>
    </div>
    <div class="total-section">
      <span class="total-amount">{{ getTotal() | currency:'USD':'symbol':'1.0-0' }}</span>
    </div>
  </div>

  <!-- Información básica -->
  <ion-card class="compact-card">
    <ion-card-content>
      <div class="info-grid">
        <div class="info-item">
          <ion-icon name="bus-outline"></ion-icon>
          <span>Unidad {{ vehiculo?.numberId || 'N/A' }}</span>
        </div>
        <div class="info-item" *ngIf="payment.kilometerStart && payment.kilometerEnd">
          <ion-icon name="speedometer-outline"></ion-icon>
          <span>{{ payment.kilometerEnd - payment.kilometerStart }} km</span>
        </div>
        <div class="info-item">
          <ion-icon name="person-outline"></ion-icon>
          <span>{{ chofer?.firstName || 'Sin chofer' }}</span>
        </div>
        <div class="info-item" *ngIf="segundoChofer">
          <ion-icon name="person-add-outline"></ion-icon>
          <span>{{ segundoChofer?.firstName }} (2do)</span>
        </div>
        <div class="info-item" *ngIf="colector">
          <ion-icon name="wallet-outline"></ion-icon>
          <span>{{ colector?.firstName }} (Colector)</span>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <ion-card class="compact-card">
    <ion-card-header>
      <ion-card-title class="small-title">Descripción</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p>{{payment.description}}</p>
    </ion-card-content>

  </ion-card>

  <!-- Lista de pagos compacta -->
  <ion-card class="compact-card">
    <ion-card-header>
      <ion-card-title class="small-title">Ingresos ({{ paymentTypes.length }} tipos)</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="payments-list">
        <div class="payment-item" *ngFor="let type of paymentTypes; let i = index">
          <div class="payment-info">
            <span class="payment-name">{{ type.paymentName }}</span>
            <span class="payment-amount">{{ type.amount | currency:'USD':'symbol':'1.0-0' }}</span>
          </div>
          <div class="payment-percent">
            <ion-chip [color]="getPaymentChipColor(i)" size="small">
              {{ ((type.amount / getTotal()) * 100) | number:'1.0-0' }}%
            </ion-chip>
          </div>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <ion-button id="button-eliminar" (click)="confirmarEliminacion()">Eliminar Pago
    <ion-icon slot="start" name="trash-outline"></ion-icon>
  </ion-button>

</ion-content>

<ion-alert
  [isOpen]="showAlert"
  header="Confirmar eliminación"
  message="¿Seguro que quieres eliminar este pago?"
  [buttons]="alertButtons">
</ion-alert>

